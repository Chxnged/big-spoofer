# BigSpoofer Technical Documentation

## Overview
BigSpoofer is a WPF-based Windows application developed in C# (.NET 9.0). It provides utilities for managing FiveM installations, including cleaning cache, spoofing hardware identifiers (via registry), and unlinking accounts.

## Project Structure
- **BigSpoofer.csproj**: Project configuration file. Defines dependencies, build target (WinExe), and single-file publish settings.
- **MainWindow.xaml**: The main UI definition using XAML. Contains the layout, styles, animations, and control templates.
- **MainWindow.xaml.cs**: The code-behind logic. Handles button clicks, executes batch commands, performs file operations, and manages application state.
- **CustomMessageBox.xaml**: A custom-styled popup window that replaces the standard Windows MessageBox.
- **app.manifest**: Application manifest file ensuring the app runs with Administrator privileges (`requireAdministrator`).

## Key Components

### 1. UI Architecture
- **Navigation**: Uses a `RadioButton` based sidebar for switching between views (`ActionGrid`, `SettingsGrid`, `UnlinkGrid`, `UninstallGrid`).
- **Styling**: Custom styles for buttons (`MenuButton`, `ActionButton`, `DiscordActionButton`), text boxes, and scrollbars are defined in `Window.Resources`.
- **Animations**: Uses `DoubleAnimation` and `ThicknessAnimation` for smooth transitions between views.

### 2. Core Functions (`MainWindow.xaml.cs`)

#### Spoofing & Cleaning
The application uses embedded batch scripts (`SpoofBatch`, `CleanBatch`, etc.) executed via `RunBatchAsync`.
- **Mechanism**: Creates a temporary `.bat` file in the temp directory, executes it with `cmd.exe`, and then deletes it.
- **Operations**:
  - Deletes registry keys in `HKLM` and `HKCU`.
  - Clears Windows temp folders (`%temp%`, `prefetch`).
  - Removes FiveM specific cache files (`CitizenFX`, `DigitalEntitlements`).

#### Unlinking
- **Discord**: Renames/Deletes `discord_rpc.dll` modules.
- **Rockstar**: Removes `DigitalEntitlements` folder.
- **CitizenFX**: Deletes the entire `CitizenFX` AppData folder.

#### Uninstall Logic
- Implemented in `Uninstall_Click`.
- Generates a robust batch script on the fly.
- Uses `taskkill` to forcefully close FiveM and Steam processes.
- Removes `FiveM` directory from `%LocalAppData%` and the Desktop shortcut.
- Runs with elevated privileges.

### 3. Version Control
- **Endpoint**: Fetches version string from `https://pastebin.com/raw/M1FS7Ct6`.
- **Logic**: Compares remote string with local `CurrentVersion` constant.
- **Behavior**: If versions mismatch, displays a prompt and shuts down the application to enforce updates.

### 4. Build Configuration
- **Target Framework**: .NET 9.0 Windows
- **Output**: Single-file executable (`BigSpoofer.exe`).
- **Optimization**: `IncludeNativeLibrariesForSelfExtract=true`, `DebugType=embedded`.

## Requirements
- **OS**: Windows 10/11 (64-bit)
- **Runtime**: .NET 9.0 Desktop Runtime (if not self-contained, but current build is self-contained).
- **Privileges**: Administrator rights are mandatory.

## Safety & Security
- **Registry Backups**: The tool *does not* currently create backups before registry editing.
- **Process Termination**: The tool forcefully terminates processes (`Steam.exe`, `FiveM.exe`) which may result in data loss if games are running.

---
*Documentation generated by chngd*
